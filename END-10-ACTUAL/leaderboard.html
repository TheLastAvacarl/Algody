<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>algorithmic Odyssey</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />

</head>
<body>


    <nav class="bg-white border-gray-200 dark:bg-gray-900">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4 relative">
        <div>
            <a href="https://www.algorithmic-odyssey.online/" class="flex items-center space-x-3 rtl:space-x-reverse absolute top-2">
                <img  src="./logo.png" class="w-16 " alt="Flowbite Logo" />
            </a>
        </div>
          <button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
              <span class="sr-only">Open main menu</span>
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
              </svg>
          </button>
          <div class="hidden w-full md:block md:w-auto" id="navbar-default">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
              <li>
                <a href="https://www.algorithmic-odyssey.online/" class="block py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500" aria-current="page">Home</a>
              </li>
              <li>
                <a href="https://www.algorithmic-odyssey.online/classroom" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Classroom</a>
              </li>
              <li>
                <a href="https://www.algorithmic-odyssey.online/forum?sort=oldest" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Forum</a>
              </li>
              <li>
                <a href="https://www.algorithmic-odyssey.online/about-us" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">About us</a>
              </li>
              <li>
                <a href="https://www.algorithmic-odyssey.online/lessons" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Lesson</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      

    <div class="container max-w-full h-screen flex flex-col justify-center">
        <div class="container max-w-full flex justify-center">
            <div>
                <h1 class="text-4xl font-bold text-center mb-10">LEADERBOARD</h1>
                <div class="relative overflow-x-auto shadow-xl sm:rounded-lg" style="max-height: 39rem;">

                    <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 overflow-auto">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                            <tr>
                                <th scope="col" class="px-6 py-3">
                                    Rank
                                </th>
                                <th scope="col" class="px-6 py-3 text-center">
                                    Name
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Scores
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Highest Level
                                </th>
                            </tr>
                        </thead>
                        <tbody id="table_body">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>

    <script>
    async function get_user_data() {
        const response = await fetch('http://localhost:3000/api/game');
        const data = await response.json();
        let rank = 1
        data.users.forEach(user => {
            score = 0
            if (user.score){
                score = user.score
            }

            const newRow = document.createElement('tr');
            newRow.className = "bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600";

            newRow.innerHTML = `
                <td class="w-4 p-4">
                    <h1 class="text-center">${rank}</h1>
                </td>
                <th scope="row" class="flex items-center px-10 py-4 text-gray-900 whitespace-nowrap dark:text-white">
                    <img class="w-10 h-10 rounded-full" src="${user.userImage}" alt="Jese image">
                    <div class="ps-3">
                        <h1 class="text-base font-semibold">${user.username}</h1>
                    </div>
                </th>
                <td class="px-10 py-4 text-center">
                    <h1>${score}</h1>
                </td>
                <td class="px-10 py-4">
                    <div class="flex items-center text-center">
                        <h1>${user.level}</h1>
                    </div>
                </td>
            `;

            const tableBody = document.getElementById('table_body');
            tableBody.appendChild(newRow);

            rank += 1
        })
    }

    get_user_data()
    </script>
</body>
</html>